<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Scissor</title>
    <meta charset="utf-8">
  </head>
  <body>
    <script type="text/javascript">
      function computerPlay()
      {
          const hand = ["rock", "paper", "scissors"];
          let rand = Math.floor(Math.random() * 10) % 3;
          return hand[rand];
      }

      function roundPlay(playerSelection, computerSelection)
      {
          const player = playerSelection.toLowerCase();
          if(player === computerSelection) {
              console.log("Draw");
              return 0;
          } else if(player == "rock" && computerSelection == "paper" ||
                    player == "paper" && computerSelection == "scissors" ||
                    player == "scissors" && computerSelection == "rock") {
              console.log("You win, " + computerSelection.charAt(0).toUpperCase() + computerSelection.slice(1) + " beats " + player.charAt(0).toUpperCase() + player.slice(1));
              return 1;
          } else {
              console.log("You lose, " + player.charAt(0).toUpperCase() + player.slice(1) + " beats " + computerSelection.charAt(0).toUpperCase() + computerSelection.slice(1));
              return -1;
          }
      }

      let playerScore = 0;
      let computerScore = 0;
      for(let i = 0; i < 10; i++){
          console.log("i = " + i);

          const player = window.prompt("pick your hand", "paper").toLowerCase();
          
          if(player != "paper" && player != "rock" && player != "scissors") {
              console.log("Wrong selection")
              i--
              continue;
          }

          const computer = computerPlay();

          const result = roundPlay(player, computer);
          console.log("result = " + result);

          if(result > 0) {
              playerScore++;
              console.log("player score " + playerScore);
          } else {
              computerScore++;
              console.log("computer score " + computerScore);
          }

          if(playerScore >= 5 || computerScore >= 5)
              break;
      }

      let resultFinal = playerScore - computerScore;
      console.log("result Final = " + resultFinal);
      if(resultFinal > 0) {
          console.log("Congratulation, You Win!");
      } else if(resultFinal < 0){
          console.log("You Lose, Better Luck Next Time");
      } else {
          console.log("What a Draw")
      }
             
    </script>

  </body>

</html>
